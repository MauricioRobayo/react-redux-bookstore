(this.webpackJsonpbookstore=this.webpackJsonpbookstore||[]).push([[0],{21:function(e,t,n){e.exports=n(34)},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),l=n.n(o),i=n(1),c=n(3),u=n(4),s=n(5),m=n(7),f=function(e){var t=e.book,n=e.handleRemoveBook;return r.a.createElement("div",{className:"Book"},r.a.createElement("img",{src:t.thumbnail,alt:""}),r.a.createElement("div",{className:"Book-category"},t.category),r.a.createElement("h2",{className:"Book-title"},t.title),r.a.createElement("div",{className:"Book-id"},t.id),r.a.createElement("button",{className:"Book-remove",type:"button",onClick:function(){return n(t)}},"Remove"))},h=n(12),d=n.n(h),v=n(17),b=function(){var e=Object(v.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes?".concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Something went wrong ".concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=new URLSearchParams({q:"subject:".concat(e),maxResults:40,fields:"items(id,volumeInfo(title,imageLinks/smallThumbnail))"});return b(t)},p="CREATE_BOOK",k="REMOVE_BOOK",y="CHANGE_FILTER",E="LOAD_BOOKS",O=["Action","Biography","History","Horror","Kids","Learning","Science Fiction"],j=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleRemoveBook=function(t){(0,e.props.removeBook)(t)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getRandomBooks)(O)}},{key:"render",value:function(){var e=this,t=this.props,n=t.books,a=t.filter;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"BookList"},0===n.length?r.a.createElement("div",null,"Loading..."):n.filter((function(e){return a===e.category||"All"===a})).reverse().map((function(t){return r.a.createElement(f,{key:t.id,book:t,handleRemoveBook:e.handleRemoveBook})}))))}}]),n}(a.Component),C={removeBook:function(e){return{type:k,book:e}},getRandomBooks:function(e){function t(e){var t;return Boolean(null===(t=e.volumeInfo.imageLinks)||void 0===t?void 0:t.smallThumbnail)}return function(n){Promise.all(e.map(g)).then((function(a){n({type:E,books:a.map((function(n,a){var r=n.items,o=Math.floor(3*Math.random()+1);return function(e,t){for(var n=e.length-1;n>e.length-1-t;n-=1){var a=Math.floor(Math.random()*(n+1)),r=[e[a],e[n]];e[n]=r[0],e[a]=r[1]}return e.slice(-t)}(r.filter(t).map((function(t){return function(e,t){var n=e.id,a=e.volumeInfo;return{id:n,title:a.title,thumbnail:a.imageLinks.smallThumbnail.replace(/^http:/,"https:"),category:t}}(t,e[a])})),o)})).flat()})}))}}},B=Object(i.b)((function(e){return{books:e.books,filter:e.filter}}),C)(j),w=n(6),A=n(13),R=n(18),S=n.n(R),F=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).debounce=function(e,t){var n=null;return function(){for(var a=this,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];clearTimeout(n),n=setTimeout((function(){e.apply(a,o)}),t)}},a.autocomplete=function(e){(function(e){var t=new URLSearchParams({q:"intitle:".concat(e),fields:"items(id,volumeInfo/title)"});return b(t)})(e).then((function(e){a.setState({suggestions:e.items.map((function(e){return{id:e.id,title:e.volumeInfo.title}}))})}))},a.handleOnKeyUp=function(e){var t=e.target.value;a.debouncedAutocomplete(t)},a.handleOnChange=function(e){var t,n=e.target,r=n.name,o=n.value;a.setState((t={},Object(A.a)(t,r,o),Object(A.a)(t,"suggestions",[]),t))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.title,r=t.category;(0,a.props.createBook)({id:S()(),title:n,category:r}),a.setState({title:"",category:"Categories"}),e.target.reset()},a.renderCategories=function(){return["Category"].concat(Object(w.a)(O)).map((function(e){return r.a.createElement("option",{disabled:"Category"===e,hidden:"Category"===e,key:e,value:e},e)}))},a.state={title:"",category:"Category",suggestions:[]},a.debouncedAutocomplete=a.debounce(a.autocomplete,250),a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.title,n=e.category,a=e.suggestions;return r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h4",null,"Add new book"),r.a.createElement("div",null,r.a.createElement("input",{list:"titles",type:"text",id:"title",placeholder:"Book title",value:t,onChange:this.handleOnChange,onKeyUp:this.handleOnKeyUp,"aria-label":"title",name:"title"}),r.a.createElement("datalist",{id:"titles"},a.map((function(e){var t=e.id,n=e.title;return r.a.createElement("option",{"aria-label":"title suggestions",key:t,value:n})}))),r.a.createElement("select",{name:"category","aria-label":"category",id:"category",value:n,onChange:this.handleOnChange,className:"Category"===n?"inactive":""},this.renderCategories()),r.a.createElement("button",{type:"submit",value:""},"Add book"))))}}]),n}(a.Component),L={createBook:function(e){return{type:p,book:e}}},N=Object(i.b)(null,L)(F),T=function(e){var t=e.handleFilterChange;return r.a.createElement("label",{htmlFor:"filter"},"Category",r.a.createElement("select",{id:"filter",onChange:function(e){return t(e.target.value)}},["All"].concat(Object(w.a)(O)).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))},x=function(e){var t=e.children;return r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("h1",null,"Bookstore CMS"),t))},I=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleFilterChange=function(t){(0,e.props.changeFilter)(t)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.filter;return r.a.createElement("div",{className:"App"},r.a.createElement(x,null,r.a.createElement(T,{filter:e,handleFilterChange:this.handleFilterChange})),r.a.createElement(N,null),r.a.createElement(B,null))}}]),n}(r.a.Component),K={changeFilter:function(e){return{type:y,filter:e}}},M=Object(i.b)((function(e){return{books:e.books,filter:e.filter}}),K)(I),U=n(19),_=n.n(U),D=n(20),H=n(2),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return[].concat(Object(w.a)(e),[t.book]);case k:return e.filter((function(e){return e.id!==t.book.id}));case E:return t.books;default:return e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"All",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.filter;switch(n){case y:return a;default:return e}},J=Object(H.c)({books:P,filter:q}),G=Object(H.a)(D.a,_.a),V=Object(H.d)(J,{books:[],filter:"All"},G);n(33);l.a.render(r.a.createElement(i.a,{store:V},r.a.createElement(M,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.54470836.chunk.js.map